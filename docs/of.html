<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 of | A progressive introduction to linear models</title>
  <meta name="description" content="A collection of material that progressively introduces how to fit and use linear models." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 of | A progressive introduction to linear models" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A collection of material that progressively introduces how to fit and use linear models." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 of | A progressive introduction to linear models" />
  
  <meta name="twitter:description" content="A collection of material that progressively introduces how to fit and use linear models." />
  

<meta name="author" content="Joshua French" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-foundations.html"/>
<link rel="next" href="data-cleaning-and-exploration.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with Linear Regression</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="1" data-path="r-foundations.html"><a href="r-foundations.html"><i class="fa fa-check"></i><b>1</b> R Foundations</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-foundations.html"><a href="r-foundations.html#setting-up-r-and-r-studio-desktop"><i class="fa fa-check"></i><b>1.1</b> Setting up R and R Studio Desktop</a></li>
<li class="chapter" data-level="1.2" data-path="r-foundations.html"><a href="r-foundations.html#running-code-scripts-and-comments"><i class="fa fa-check"></i><b>1.2</b> Running code, scripts, and comments</a></li>
<li class="chapter" data-level="1.3" data-path="r-foundations.html"><a href="r-foundations.html#assignment"><i class="fa fa-check"></i><b>1.3</b> Assignment</a></li>
<li class="chapter" data-level="1.4" data-path="r-foundations.html"><a href="r-foundations.html#functions"><i class="fa fa-check"></i><b>1.4</b> Functions</a></li>
<li class="chapter" data-level="1.5" data-path="r-foundations.html"><a href="r-foundations.html#packages"><i class="fa fa-check"></i><b>1.5</b> Packages</a></li>
<li class="chapter" data-level="1.6" data-path="r-foundations.html"><a href="r-foundations.html#getting-help"><i class="fa fa-check"></i><b>1.6</b> Getting help</a></li>
<li class="chapter" data-level="1.7" data-path="r-foundations.html"><a href="r-foundations.html#data-types-and-structures"><i class="fa fa-check"></i><b>1.7</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-foundations.html"><a href="r-foundations.html#basic-data-types"><i class="fa fa-check"></i><b>1.7.1</b> Basic data types</a></li>
<li class="chapter" data-level="1.7.2" data-path="r-foundations.html"><a href="r-foundations.html#other-important-object-types"><i class="fa fa-check"></i><b>1.7.2</b> Other important object types</a></li>
<li class="chapter" data-level="1.7.3" data-path="r-foundations.html"><a href="r-foundations.html#data-structures"><i class="fa fa-check"></i><b>1.7.3</b> Data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="of.html"><a href="of.html"><i class="fa fa-check"></i><b>2</b> of</a>
<ul>
<li class="chapter" data-level="2.1" data-path="of.html"><a href="of.html#vectors"><i class="fa fa-check"></i><b>2.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="of.html"><a href="of.html#creation"><i class="fa fa-check"></i><b>2.1.1</b> Creation</a></li>
<li class="chapter" data-level="2.1.2" data-path="of.html"><a href="of.html#categorical-vectors"><i class="fa fa-check"></i><b>2.1.2</b> Categorical vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="of.html"><a href="of.html#extracting-parts-of-a-vector"><i class="fa fa-check"></i><b>2.1.3</b> Extracting parts of a vector</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="of.html"><a href="of.html#helpful-functions"><i class="fa fa-check"></i><b>2.2</b> Helpful functions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="of.html"><a href="of.html#general-functions"><i class="fa fa-check"></i><b>2.2.1</b> General functions</a></li>
<li class="chapter" data-level="2.2.2" data-path="of.html"><a href="of.html#functions-related-to-statistical-distributions"><i class="fa fa-check"></i><b>2.2.2</b> Functions related to statistical distributions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="of.html"><a href="of.html#data-frames"><i class="fa fa-check"></i><b>2.3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="of.html"><a href="of.html#direct-creation"><i class="fa fa-check"></i><b>2.3.1</b> Direct creation</a></li>
<li class="chapter" data-level="2.3.2" data-path="of.html"><a href="of.html#importing-data"><i class="fa fa-check"></i><b>2.3.2</b> Importing Data</a></li>
<li class="chapter" data-level="2.3.3" data-path="of.html"><a href="of.html#extracting-parts-of-a-data-frame"><i class="fa fa-check"></i><b>2.3.3</b> Extracting parts of a data frame</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="of.html"><a href="of.html#using-the-pipe-operator"><i class="fa fa-check"></i><b>2.4</b> Using the pipe operator</a></li>
<li class="chapter" data-level="2.5" data-path="of.html"><a href="of.html#dealing-with-common-problems"><i class="fa fa-check"></i><b>2.5</b> Dealing with common problems</a></li>
<li class="chapter" data-level="2.6" data-path="of.html"><a href="of.html#ecosystem-debate"><i class="fa fa-check"></i><b>2.6</b> Ecosystem debate</a></li>
<li class="chapter" data-level="2.7" data-path="of.html"><a href="of.html#additional-information"><i class="fa fa-check"></i><b>2.7</b> Additional information</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="of.html"><a href="of.html#comparing-assignment-operators"><i class="fa fa-check"></i><b>2.7.1</b> Comparing assignment operators</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html"><i class="fa fa-check"></i><b>3</b> Data cleaning and exploration</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#raw-palmer-penguins-data"><i class="fa fa-check"></i><b>3.1</b> Raw Palmer penguins data</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#initial-data-cleaning"><i class="fa fa-check"></i><b>3.2</b> Initial data cleaning</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#numerical-summarization-of-data"><i class="fa fa-check"></i><b>3.3</b> Numerical summarization of data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#numeric-data"><i class="fa fa-check"></i><b>3.3.1</b> Numeric data</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#categorical-data"><i class="fa fa-check"></i><b>3.3.2</b> Categorical data</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#the-summary-function"><i class="fa fa-check"></i><b>3.3.3</b> The <code>summary</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#visual-summaries-of-data"><i class="fa fa-check"></i><b>3.4</b> Visual summaries of data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#the-ggplot-recipe"><i class="fa fa-check"></i><b>3.4.1</b> The ggplot recipe</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#univariate-plots"><i class="fa fa-check"></i><b>3.4.2</b> Univariate plots</a></li>
<li class="chapter" data-level="3.4.3" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#bivariate-plots"><i class="fa fa-check"></i><b>3.4.3</b> Bivariate plots</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#multivariate-plots"><i class="fa fa-check"></i><b>3.4.4</b> Multivariate plots</a></li>
<li class="chapter" data-level="3.4.5" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#facetted-plots-and-alternatives"><i class="fa fa-check"></i><b>3.4.5</b> Facetted plots (and alternatives)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#a-plan-for-data-cleaning-and-exploration"><i class="fa fa-check"></i><b>3.5</b> A plan for data cleaning and exploration</a></li>
<li class="chapter" data-level="3.6" data-path="data-cleaning-and-exploration.html"><a href="data-cleaning-and-exploration.html#final-notes-on-missing-or-erroneous-data"><i class="fa fa-check"></i><b>3.6</b> Final notes on missing or erroneous data</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html"><i class="fa fa-check"></i><b>A</b> Overview of matrix facts</a>
<ul>
<li class="chapter" data-level="A.1" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#notation"><i class="fa fa-check"></i><b>A.1</b> Notation</a></li>
<li class="chapter" data-level="A.2" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#basic-mathematical-operations"><i class="fa fa-check"></i><b>A.2</b> Basic mathematical operations</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#addition-and-subtraction"><i class="fa fa-check"></i><b>A.2.1</b> Addition and subtraction</a></li>
<li class="chapter" data-level="A.2.2" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#scalar-multiplication"><i class="fa fa-check"></i><b>A.2.2</b> Scalar multiplication</a></li>
<li class="chapter" data-level="A.2.3" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#matrix-multiplication"><i class="fa fa-check"></i><b>A.2.3</b> Matrix multiplication</a></li>
<li class="chapter" data-level="A.2.4" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#transpose"><i class="fa fa-check"></i><b>A.2.4</b> Transpose</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#basic-mathematical-properties"><i class="fa fa-check"></i><b>A.3</b> Basic mathematical properties</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#associative-property"><i class="fa fa-check"></i><b>A.3.1</b> Associative property</a></li>
<li class="chapter" data-level="A.3.2" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#distributive-property"><i class="fa fa-check"></i><b>A.3.2</b> Distributive property</a></li>
<li class="chapter" data-level="A.3.3" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#no-commutative-property"><i class="fa fa-check"></i><b>A.3.3</b> No commutative property</a></li>
<li class="chapter" data-level="A.3.4" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#transpose-related-properties"><i class="fa fa-check"></i><b>A.3.4</b> Transpose-related properties</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#special-matrices"><i class="fa fa-check"></i><b>A.4</b> Special matrices</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#square-matrices"><i class="fa fa-check"></i><b>A.4.1</b> Square matrices</a></li>
<li class="chapter" data-level="A.4.2" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#identity-matrix"><i class="fa fa-check"></i><b>A.4.2</b> Identity matrix</a></li>
<li class="chapter" data-level="A.4.3" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#diagonal-matrices"><i class="fa fa-check"></i><b>A.4.3</b> Diagonal matrices</a></li>
<li class="chapter" data-level="A.4.4" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#symmetric-matrices"><i class="fa fa-check"></i><b>A.4.4</b> Symmetric matrices</a></li>
<li class="chapter" data-level="A.4.5" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#idempotent-matrices"><i class="fa fa-check"></i><b>A.4.5</b> Idempotent matrices</a></li>
<li class="chapter" data-level="A.4.6" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#positive-definite-matrices"><i class="fa fa-check"></i><b>A.4.6</b> Positive definite matrices</a></li>
<li class="chapter" data-level="A.4.7" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#inverse-matrix"><i class="fa fa-check"></i><b>A.4.7</b> Inverse matrix</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#matrix-derivatives"><i class="fa fa-check"></i><b>A.5</b> Matrix derivatives</a></li>
<li class="chapter" data-level="A.6" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#additional-topics"><i class="fa fa-check"></i><b>A.6</b> Additional topics</a>
<ul>
<li class="chapter" data-level="A.6.1" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#determinant"><i class="fa fa-check"></i><b>A.6.1</b> Determinant</a></li>
<li class="chapter" data-level="A.6.2" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#linearly-independent-vectors"><i class="fa fa-check"></i><b>A.6.2</b> Linearly independent vectors</a></li>
<li class="chapter" data-level="A.6.3" data-path="overview-of-matrix-facts.html"><a href="overview-of-matrix-facts.html#rank"><i class="fa fa-check"></i><b>A.6.3</b> Rank</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="prob-review.html"><a href="prob-review.html"><i class="fa fa-check"></i><b>B</b> Overview of probability, random variables, and random vectors</a>
<ul>
<li class="chapter" data-level="B.1" data-path="prob-review.html"><a href="prob-review.html#probability-basics"><i class="fa fa-check"></i><b>B.1</b> Probability Basics</a></li>
<li class="chapter" data-level="B.2" data-path="prob-review.html"><a href="prob-review.html#random-variables"><i class="fa fa-check"></i><b>B.2</b> Random Variables</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="prob-review.html"><a href="prob-review.html#discrete-random-variables"><i class="fa fa-check"></i><b>B.2.1</b> Discrete random variables</a></li>
<li class="chapter" data-level="B.2.2" data-path="prob-review.html"><a href="prob-review.html#continuous-random-variables"><i class="fa fa-check"></i><b>B.2.2</b> Continuous random variables</a></li>
<li class="chapter" data-level="B.2.3" data-path="prob-review.html"><a href="prob-review.html#useful-facts-for-transformations-of-random-variables"><i class="fa fa-check"></i><b>B.2.3</b> Useful facts for transformations of random variables</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="prob-review.html"><a href="prob-review.html#multivariate-distributions"><i class="fa fa-check"></i><b>B.3</b> Multivariate distributions</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="prob-review.html"><a href="prob-review.html#basic-properties"><i class="fa fa-check"></i><b>B.3.1</b> Basic properties</a></li>
<li class="chapter" data-level="B.3.2" data-path="prob-review.html"><a href="prob-review.html#marginal-distributions"><i class="fa fa-check"></i><b>B.3.2</b> Marginal distributions</a></li>
<li class="chapter" data-level="B.3.3" data-path="prob-review.html"><a href="prob-review.html#independence-of-random-variables"><i class="fa fa-check"></i><b>B.3.3</b> Independence of random variables</a></li>
<li class="chapter" data-level="B.3.4" data-path="prob-review.html"><a href="prob-review.html#conditional-distributions"><i class="fa fa-check"></i><b>B.3.4</b> Conditional distributions</a></li>
<li class="chapter" data-level="B.3.5" data-path="prob-review.html"><a href="prob-review.html#covariance"><i class="fa fa-check"></i><b>B.3.5</b> Covariance</a></li>
<li class="chapter" data-level="B.3.6" data-path="prob-review.html"><a href="prob-review.html#useful-facts-for-transformations-of-multiple-random-variables"><i class="fa fa-check"></i><b>B.3.6</b> Useful facts for transformations of multiple random variables</a></li>
<li class="chapter" data-level="B.3.7" data-path="prob-review.html"><a href="prob-review.html#binomial-distribution-example"><i class="fa fa-check"></i><b>B.3.7</b> Binomial distribution example</a></li>
<li class="chapter" data-level="B.3.8" data-path="prob-review.html"><a href="prob-review.html#continuous-bivariate-distribution-example"><i class="fa fa-check"></i><b>B.3.8</b> Continuous bivariate distribution example</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="prob-review.html"><a href="prob-review.html#random-vectors"><i class="fa fa-check"></i><b>B.4</b> Random vectors</a>
<ul>
<li class="chapter" data-level="B.4.1" data-path="prob-review.html"><a href="prob-review.html#definition"><i class="fa fa-check"></i><b>B.4.1</b> Definition</a></li>
<li class="chapter" data-level="B.4.2" data-path="prob-review.html"><a href="prob-review.html#mean-variance-and-covariance"><i class="fa fa-check"></i><b>B.4.2</b> Mean, variance, and covariance</a></li>
<li class="chapter" data-level="B.4.3" data-path="prob-review.html"><a href="prob-review.html#properties-of-transformations-of-random-vectors"><i class="fa fa-check"></i><b>B.4.3</b> Properties of transformations of random vectors</a></li>
<li class="chapter" data-level="B.4.4" data-path="prob-review.html"><a href="prob-review.html#continuous-bivariate-distribution-example-continued"><i class="fa fa-check"></i><b>B.4.4</b> Continuous bivariate distribution example continued</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="prob-review.html"><a href="prob-review.html#multivariate-normal-gaussian-distribution"><i class="fa fa-check"></i><b>B.5</b> Multivariate normal (Gaussian) distribution</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="prob-review.html"><a href="prob-review.html#definition-1"><i class="fa fa-check"></i><b>B.5.1</b> Definition</a></li>
<li class="chapter" data-level="B.5.2" data-path="prob-review.html"><a href="prob-review.html#linear-functions-of-a-multivariate-normal-random-vector"><i class="fa fa-check"></i><b>B.5.2</b> Linear functions of a multivariate normal random vector</a></li>
<li class="chapter" data-level="B.5.3" data-path="prob-review.html"><a href="prob-review.html#ols-example"><i class="fa fa-check"></i><b>B.5.3</b> OLS example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A progressive introduction to linear models</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="of" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> of<a href="of.html#of" class="anchor-section" aria-label="Anchor link to header"></a></h1>
dimensions
</th>
<th style="text-align:left;">
homogeneous
</th>
<th style="text-align:left;">
heterogeneous
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
atomic vector
</td>
<td style="text-align:left;">
list
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
matrix
</td>
<td style="text-align:left;">
data frame
</td>
</tr>
<tr>
<td style="text-align:left;">
1 or more
</td>
<td style="text-align:left;">
array
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<div id="vectors" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Vectors<a href="of.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A <em>vector</em> is a one-dimensional set of data of the same type.</p>
<div id="creation" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Creation<a href="of.html#creation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most basic way to create a vector is the <code>c</code> (combine) function. The <code>c</code> function combines values into an atomic vector or list.</p>
<p>The following commands create vectors of type <code>numeric</code>, <code>character</code>, and <code>logical</code>, respectively.</p>
<ul>
<li><code>c(1, 2, 5.3, 6, -2, 4)</code></li>
<li><code>c("one", "two", "three")</code></li>
<li><code>c(TRUE, TRUE, FALSE, TRUE)</code></li>
</ul>
<p>R provides two main functions for creating vectors with specific patterns: <code>seq</code> and <code>rep</code>.</p>
<p>The <code>seq</code> (sequence) function is used to create an equidistant series of numeric values. Some examples:</p>
<ul>
<li><code>seq(1, 10)</code> creates a sequence of numbers from 1 to 10 in increments of 1.</li>
<li><code>1:10</code> creates a sequence of numbers from 1 to 10 in increments of 1.</li>
<li><code>seq(1, 20, by = 2)</code> creates a sequence of numbers from 1 to 20 in increments of 2.</li>
<li><code>seq(10, 20, len = 100)</code> creates a sequence of numbers from 10 to 20 of length 100.</li>
</ul>
<p>The <code>rep</code> (replicate) function can be used to create a vector by replicating values. Some examples:</p>
<ul>
<li><code>rep(1:3, times = 3)</code> replicates the sequence <code>1, 2, 3</code> three times in a row.</li>
<li><code>rep(c("trt1", "trt2", "trt3"), times = 1:3)</code> replicates <code>"trt1"</code> once, <code>"trt2"</code> twice, and <code>"trt3"</code> three times.</li>
<li><code>rep(1:3, each = 3)</code> replicates each element of the sequence 1, 2, 3 three times.</li>
</ul>
<p>Multiple vectors can be combined into a new vector object using the <code>c</code> function. E.g., <code>c(v1, v2, v3)</code> would combine vectors <code>v1</code>, <code>v2</code>, and <code>v3</code>.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the commands below in the Console to see what is printed. After you do that, try to answer the following questions:</p>
<ul>
<li>What does the <code>by</code> argument of the <code>seq</code> function control?</li>
<li>What does the <code>len</code> argument of the <code>seq</code> function control?</li>
<li>What does the <code>times</code> argument of the <code>rep</code> function control?</li>
<li>What does the <code>each</code> argument of the <code>rep</code> function control?</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="of.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vector creation</span></span>
<span id="cb10-2"><a href="of.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="fl">5.3</span>, <span class="dv">6</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb10-3"><a href="of.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>)</span>
<span id="cb10-4"><a href="of.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb10-5"><a href="of.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sequences of values</span></span>
<span id="cb10-6"><a href="of.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb10-7"><a href="of.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb10-8"><a href="of.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb10-9"><a href="of.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="at">len =</span> <span class="dv">100</span>)</span>
<span id="cb10-10"><a href="of.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># replicated values</span></span>
<span id="cb10-11"><a href="of.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb10-12"><a href="of.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;trt1&quot;</span>, <span class="st">&quot;trt2&quot;</span>, <span class="st">&quot;trt3&quot;</span>), <span class="at">times =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb10-13"><a href="of.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code></pre></div>
<p>Next, we can practice combining multiple vectors using <code>c</code>.
Run the commands below in the Console.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="of.html#cb11-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span> <span class="co"># create a vector, v1</span></span>
<span id="cb11-2"><a href="of.html#cb11-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">11</span>) <span class="co"># create another vector, v2</span></span>
<span id="cb11-3"><a href="of.html#cb11-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">each =</span> <span class="dv">3</span>) <span class="co"># crate a third vector, v3</span></span>
<span id="cb11-4"><a href="of.html#cb11-4" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v2, v3) <span class="co"># combine v1, v2, and v3 into a new vector</span></span>
<span id="cb11-5"><a href="of.html#cb11-5" aria-hidden="true" tabindex="-1"></a>new <span class="co"># print the combined vector</span></span></code></pre></div>
</div>
</div>
<div id="categorical-vectors" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Categorical vectors<a href="of.html#categorical-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Categorical data should be stored as a <code>factor</code> in R. Even though your code related to categorical data may work when stored as <code>character</code> or <code>numeric</code> data because a cautious developer planned for that possibility, it is best to use good coding practices that minimize potential issues.</p>
<p>The <code>factor</code> function takes a vector of values that can be coerced to type <code>character</code> and converts them to an object of class <code>factor</code>. In the code chunk below, we create two <code>factor</code> objects from vectors.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="of.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create some factor variables</span></span>
<span id="cb12-2"><a href="of.html#cb12-2" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">times =</span> <span class="dv">3</span>))</span>
<span id="cb12-3"><a href="of.html#cb12-3" aria-hidden="true" tabindex="-1"></a>f1</span>
<span id="cb12-4"><a href="of.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6</span></span>
<span id="cb12-5"><a href="of.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: 1 2 3 4 5 6</span></span>
<span id="cb12-6"><a href="of.html#cb12-6" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">7</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="cn">FALSE</span>))</span>
<span id="cb12-7"><a href="of.html#cb12-7" aria-hidden="true" tabindex="-1"></a>f2</span>
<span id="cb12-8"><a href="of.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] a     7     blue  blue  FALSE</span></span>
<span id="cb12-9"><a href="of.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: 7 a blue FALSE</span></span></code></pre></div>
<p>Note that when a <code>factor</code> object is printed that it lists the <code>Levels</code> (i.e., unique categories) of the object.</p>
<p>Some additional comments:</p>
<ul>
<li><code>factor</code> objects aren’t technically vectors (e.g., running <code>is.factor(f2)</code> based on the above code will return <code>FALSE</code>) though they essentially behave like vectors, which is why they are included here.</li>
<li>The <code>is.factor</code> function can be used to determine whether an object is a <code>factor</code>.</li>
<li>You can create <code>factor</code> objects with specific orderings of categories using the <code>level</code> and <code>ordered</code> arguments of the <code>factor</code> function (see <code>?factor</code> for more details).</li>
</ul>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Attempt to complete the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Create a vector named <code>grp</code> that has two levels: <code>a</code> and <code>b</code>, where the first 7 values are <code>a</code> and the second 4 values are <code>b</code>.</li>
<li>Run <code>is.factor(grp)</code> in the Console.</li>
<li>Run <code>is.vector(grp)</code> in the Console.</li>
<li>Run <code>typeof(grp)</code> in the Console.</li>
</ol>
<p>Related to the last task, a <code>factor</code> object is <em>technically</em> a collection of integers that have labels associated with each unique integer value.</p>
<p>Let’s look at creating ordered <code>factor</code> objects. Suppose we have categorical data with the categories <code>small</code>, <code>medium</code>, and <code>large</code>. We create a <code>size</code> vector with hypothetical data below.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="of.html#cb13-1" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>)</span></code></pre></div>
<p>If we convert <code>size</code> to a factor, R will automatically order the levels of size alphabetically.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="of.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(size)</span>
<span id="cb14-2"><a href="of.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] small  medium small  large  medium medium large </span></span>
<span id="cb14-3"><a href="of.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: large medium small</span></span></code></pre></div>
<p>This is not technically a problem, but can result in undesirable side effects such as plots with levels in an undesirable order.</p>
<p>To create an ordered vector, we specify the desired order of the levels and set the <code>ordered</code> argument to <code>TRUE</code>, as in the code below.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="of.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(size, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-2"><a href="of.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] small  medium small  large  medium medium large </span></span>
<span id="cb15-3"><a href="of.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: small &lt; medium &lt; large</span></span></code></pre></div>
</div>
</div>
<div id="extracting-parts-of-a-vector" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Extracting parts of a vector<a href="of.html#extracting-parts-of-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parts a vector can be extracted by appending an index vector in square brackets <code>[]</code> to the name of the vector, where the index vector indicates which parts of the vector to retain or exclude. We can include either numbers or logical values in our index vector. We discuss both approaches below.</p>
<div id="selection-use-a-numeric-index-vector" class="section level4 hasAnchor" number="2.1.3.1">
<h4><span class="header-section-number">2.1.3.1</span> Selection use a numeric index vector<a href="of.html#selection-use-a-numeric-index-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s create a <code>numeric</code> vector <code>a</code> with the values 2, 4, 6, 8, 10, 12, 14, 16.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="of.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define a sequence 2, 4, ..., 16</span></span>
<span id="cb16-2"><a href="of.html#cb16-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">16</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb16-3"><a href="of.html#cb16-3" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb16-4"><a href="of.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  2  4  6  8 10 12 14 16</span></span></code></pre></div>
<p>To extract the 2nd, 4th, and 6th elements of <code>a</code>, we can use the code below. The code indicates that the 2nd, 4th, and 6th elements of <code>a</code> should be extracted.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="of.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract subset of vector</span></span>
<span id="cb17-2"><a href="of.html#cb17-2" aria-hidden="true" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span>
<span id="cb17-3"><a href="of.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  4  8 12</span></span></code></pre></div>
<p>You can also use “negative” indexing to indicate the elements of the vector you want to exclude. Specifically, supplying a negative index vector indicates the values you want to exclude from your selection.</p>
<p>In the example below, we use the minus (<code>-</code>) sign in front of the index vector <code>c(2, 4, 6)</code> to indicate we want all elements of <code>a</code> EXCEPT the 2nd, 4th, and 6th. The last line of code excludes the 3rd through 6th elements of <code>a</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="of.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract part of vector using negative indexing</span></span>
<span id="cb18-2"><a href="of.html#cb18-2" aria-hidden="true" tabindex="-1"></a>a[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)] <span class="co"># select all but element 2, 4, 6</span></span>
<span id="cb18-3"><a href="of.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  2  6 10 14 16</span></span>
<span id="cb18-4"><a href="of.html#cb18-4" aria-hidden="true" tabindex="-1"></a>a[<span class="sc">-</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>)] <span class="co"># select all but elements 3-6</span></span>
<span id="cb18-5"><a href="of.html#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  2  4 14 16</span></span></code></pre></div>
</div>
<div id="logical-expressions" class="section level4 hasAnchor" number="2.1.3.2">
<h4><span class="header-section-number">2.1.3.2</span> Logical expressions<a href="of.html#logical-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A logical expression uses one or more logical operators to determine which elements of an object satisfy the specified statement. The basic logical operators are:</p>
<ul>
<li><code>&lt;</code>, <code>&lt;=</code>: less than, less than or equal to.</li>
<li><code>&gt;</code>, <code>&gt;=</code>: greater than, greater than or equal to.</li>
<li><code>==</code>: equal to.</li>
<li><code>!=</code>: not equal to.</li>
</ul>
<p>Creating a logical expression with a vector will result in a logical vector indicating whether each element satisfies the logical expression.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in R and see what is printed. What task is each statement performing?</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="of.html#cb19-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&gt;</span> <span class="dv">10</span>  <span class="co"># which elements of a are &gt; 10?</span></span>
<span id="cb19-2"><a href="of.html#cb19-2" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&lt;=</span> <span class="dv">4</span>  <span class="co"># which elements of a are &lt;= 10?</span></span>
<span id="cb19-3"><a href="of.html#cb19-3" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> <span class="dv">10</span> <span class="co"># which elements of a are equal to 10?</span></span>
<span id="cb19-4"><a href="of.html#cb19-4" aria-hidden="true" tabindex="-1"></a>a <span class="sc">!=</span> <span class="dv">10</span> <span class="co"># which elements of a are not equal to 10?</span></span></code></pre></div>
</div>
<p>We can create more complicated logical expressions using the “and”, “or”, and “not” operators.</p>
<ul>
<li><code>&amp;</code>: and.</li>
<li><code>|</code>: or.</li>
<li><code>!</code>: not, i.e., not true.</li>
</ul>
<p>The <code>&amp;</code> operator returns <code>TRUE</code> if all logical values connected by the <code>&amp;</code> are <code>TRUE</code>, otherwise it returns <code>FALSE</code>. On the other hand, the <code>|</code> operator returns <code>TRUE</code> if any logical values connected by the <code>|</code> are <code>TRUE</code>, otherwise it returns <code>FALSE</code>. The <code>!</code> operator returns the complement of a logical value or expression.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands below in the Console.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="of.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span>
<span id="cb20-2"><a href="of.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span>
<span id="cb20-3"><a href="of.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span>
<span id="cb20-4"><a href="of.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span>
<span id="cb20-5"><a href="of.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span></span>
<span id="cb20-6"><a href="of.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span></span></code></pre></div>
<p>What role does <code>&amp;</code> serve in a sequence of logical values? Similarly, what roles do <code>|</code> and <code>!</code> serve in a sequence of logical values?</p>
</div>
<p>Logical expressions can be connected via <code>&amp;</code> and <code>|</code> (and impacted via <code>!</code>), in which case the operators are applied elementwise (i.e., to all of the first elements in the expressions, then all the second eleemnts in the expressions, etc).</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in R and see what is printed. What task is each statement performing? Note that the parentheses <code>()</code> are used to group logical expressions to more easily understand what is being done. This is a good coding style to follow.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="of.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># which elements of a are &gt; 6 and &lt;= 10</span></span>
<span id="cb21-2"><a href="of.html#cb21-2" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&gt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> (a <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb21-3"><a href="of.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># which elements of a are &lt;= 4 or &gt;= 12</span></span>
<span id="cb21-4"><a href="of.html#cb21-4" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&lt;=</span> <span class="dv">4</span>) <span class="sc">|</span> (a <span class="sc">&gt;=</span> <span class="dv">12</span>)</span>
<span id="cb21-5"><a href="of.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># which elements of a are NOT &lt;= 4 or &gt;= 12</span></span>
<span id="cb21-6"><a href="of.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>((a <span class="sc">&lt;=</span> <span class="dv">4</span>) <span class="sc">|</span> (a <span class="sc">&gt;=</span> <span class="dv">12</span>))</span></code></pre></div>
</div>
</div>
<div id="selection-using-logical-expressions" class="section level4 hasAnchor" number="2.1.3.3">
<h4><span class="header-section-number">2.1.3.3</span> Selection using logical expressions<a href="of.html#selection-using-logical-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Logical expressions can be used to return parts of an object satisfying the appropriate criteria. Specifically, we pass logical expressions within the square brackets to access part of a data structure. This syntax will return each element of the object for which the expression is <code>TRUE</code>.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in R and see what is printed. What task is each statement performing?</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="of.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the parts of a with values &lt; 6</span></span>
<span id="cb22-2"><a href="of.html#cb22-2" aria-hidden="true" tabindex="-1"></a>a[a <span class="sc">&lt;</span> <span class="dv">6</span>]</span>
<span id="cb22-3"><a href="of.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the parts of a with values equal to 10</span></span>
<span id="cb22-4"><a href="of.html#cb22-4" aria-hidden="true" tabindex="-1"></a>a[a <span class="sc">==</span> <span class="dv">10</span>]</span>
<span id="cb22-5"><a href="of.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the parts of a with values &lt; 6 or equal to 10</span></span>
<span id="cb22-6"><a href="of.html#cb22-6" aria-hidden="true" tabindex="-1"></a>a[(a <span class="sc">&lt;</span> <span class="dv">6</span>)<span class="sc">|</span>(a <span class="sc">==</span> <span class="dv">10</span>)]</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="helpful-functions" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Helpful functions<a href="of.html#helpful-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We provide a brief overview of R functions we often use in our data analysis.</p>
<div id="general-functions" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> General functions<a href="of.html#general-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For brevity, Table <a href="of.html#tab:generalfunctions">2.1</a> provides a table of functions commonly useful for basic data analysis along with a description of their purpose.</p>
<table>
<caption>
<span id="tab:generalfunctions">Table 2.1: </span>Functions frequently useful for data analysis.
</caption>
<thead>
<tr>
<th style="text-align:left;">
function
</th>
<th style="text-align:left;">
purpose
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>length</code>
</td>
<td style="text-align:left;">
Determines the length/number of elements in an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>sum</code>
</td>
<td style="text-align:left;">
Sums the elements in the object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>mean</code>
</td>
<td style="text-align:left;">
Computes the sample mean of the elements in an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>var</code>
</td>
<td style="text-align:left;">
Computes the sample variance of the elements in an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>sd</code>
</td>
<td style="text-align:left;">
Computes the sample standard deviation the elements of an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>range</code>
</td>
<td style="text-align:left;">
Determines the range (minimum and maximum) of the elements of an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>log</code>
</td>
<td style="text-align:left;">
Computes the (natural) logarithm of elements in an object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>summary</code>
</td>
<td style="text-align:left;">
Returns a summary of an object. The output changes depending on the class type of the object.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>str</code>
</td>
<td style="text-align:left;">
Provides information about the structure of an object. Usually, the class of the object and some information about its size.
</td>
</tr>
</tbody>
</table>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in the Console. Determine for yourself what task each command is performing.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="of.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># common functions</span></span>
<span id="cb23-2"><a href="of.html#cb23-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">100</span>) <span class="co"># sample 100 iid values from an Exponential(1) distribution</span></span>
<span id="cb23-3"><a href="of.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x) <span class="co"># length of x</span></span>
<span id="cb23-4"><a href="of.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x) <span class="co"># sum of x</span></span>
<span id="cb23-5"><a href="of.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x) <span class="co"># sample mean of x</span></span>
<span id="cb23-6"><a href="of.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(x) <span class="co"># sample variance of x</span></span>
<span id="cb23-7"><a href="of.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(x) <span class="co"># sample standard deviation of x</span></span>
<span id="cb23-8"><a href="of.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(x) <span class="co"># range of x</span></span>
<span id="cb23-9"><a href="of.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(x) <span class="co"># logarithm of x</span></span>
<span id="cb23-10"><a href="of.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x) <span class="co"># summary of x</span></span>
<span id="cb23-11"><a href="of.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x) <span class="co"># structure of x</span></span></code></pre></div>
</div>
</div>
<div id="functions-related-to-statistical-distributions" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Functions related to statistical distributions<a href="of.html#functions-related-to-statistical-distributions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are doing a lot of data analysis, you are likely to be familiar with statistical concepts such as distributions. R is designed specifically for statistical analysis, so it natively includes functionality for determining properties of statistical distributions. R makes it easy to evaluate the cumulative distribution function (CDF) of a distribution, the quantiles of a distribution, the density or mass of a distribution, and to sample random values from a distribution.</p>
<p>Suppose that a random variable <span class="math inline">\(X\)</span> has the <code>dist</code> distribution. The function templates in the list below describe how to obtain certain properties of <span class="math inline">\(X\)</span>.</p>
<ul>
<li><code>p[dist](q, ...)</code>: returns the cdf of <span class="math inline">\(X\)</span> evaluated at <code>q</code>, i.e., <span class="math inline">\(p=P(X\leq q)\)</span>.</li>
<li><code>q[dist](p, ...)</code>: returns the inverse cdf (or quantile function) of <span class="math inline">\(X\)</span> evaluated at <span class="math inline">\(p\)</span>, i.e., <span class="math inline">\(q = \inf\{x: P(X\leq x) \geq p\}\)</span>.</li>
<li><code>d[dist](x, ...)</code>: returns the mass or density of <span class="math inline">\(X\)</span> evaluated at <span class="math inline">\(x\)</span> (depending on whether it’s discrete or continuous).</li>
<li><code>r[dist](n, ...)</code>: returns an independent and identically distributed random sample of size <code>n</code> having the same distribution as <span class="math inline">\(X\)</span>.</li>
<li>The <code>...</code> indicates that additional arguments describing the parameters of the distribution may be required.</li>
</ul>
<p>To determine the distributions available by default in R, run <code>?Distributions</code> in the R Console. We demonstrate some of this functionality in the practice below.</p>
<p>Note: If you are using the statistical distribution-related functions in R, it is imperative that you look at the associated documentation to determine the parameterization of the distribution, as this dramatically impacts the results.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in R to see the output. What task is each command performing?</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="of.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pnorm</span>(<span class="fl">1.96</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb24-2"><a href="of.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qunif</span>(<span class="fl">0.6</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)</span>
<span id="cb24-3"><a href="of.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbinom</span>(<span class="dv">2</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">prob =</span> .<span class="dv">2</span>)</span>
<span id="cb24-4"><a href="of.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dexp</span>(<span class="dv">1</span>, <span class="at">rate =</span> <span class="dv">2</span>)</span>
<span id="cb24-5"><a href="of.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rchisq</span>(<span class="dv">100</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>Here are descriptions of what each command performs:</p>
<ul>
<li><code>pnorm(1.96, mean = 0, sd = 1)</code> returns the probability that a standard normal random variable is less than or equal to 1.96, i.e., <span class="math inline">\(P(X \leq 1.96)\)</span>.</li>
<li><code>qunif(0.6, min = 0, max = 1)</code> returns the value <span class="math inline">\(x\)</span> such that <span class="math inline">\(P(X\leq x) = 0.6\)</span> for a uniform random variable on the interval <span class="math inline">\([0, 1]\)</span>.</li>
<li><code>dbinom(2, size = 20, prob = .2)</code> returns the probability that <span class="math inline">\(X\)</span> equals 2 when <span class="math inline">\(X\)</span> has a Binomial distribution with <span class="math inline">\(n=20\)</span> trials and the probability of a successful trial is <span class="math inline">\(0.2\)</span>.</li>
<li><code>dexp(1, rate = 2)</code> evaluates the density of an exponential random variable with mean = 1/2 (i.e., the reciprocal of the <code>rate</code>) at <span class="math inline">\(x=1\)</span>.</li>
<li><code>rchisq(100, df = 5)</code> draws a sample of 100 observations from a chi-squared random variable with 5 degrees of freedom.</li>
</ul>
</div>
</div>
</div>
<div id="data-frames" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Data Frames<a href="of.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data frames are two-dimensional data objects. Each column of a data frame is a vector (or variable) of possibly different data types. This is a <em>fundamental</em> data structure used by most of R’s modeling software. The class of a <strong>base</strong> R data frame is <code>data.frame</code>, which is technically a specially structured <code>list</code>.</p>
<p>In general, I recommend <em>tidy data</em>, which means that each variable forms a column of the data frame, and each observation forms a row.</p>
<div id="direct-creation" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Direct creation<a href="of.html#direct-creation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames are directly created by passing vectors into the <code>data.frame</code> function.</p>
<p>The names of the columns in the data frame are the names of the vectors you give the <code>data.frame</code> function. Consider the following simple example.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="of.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create basic data frame</span></span>
<span id="cb25-2"><a href="of.html#cb25-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb25-3"><a href="of.html#cb25-3" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="cn">NA</span>)</span>
<span id="cb25-4"><a href="of.html#cb25-4" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb25-5"><a href="of.html#cb25-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(d,e,f)</span>
<span id="cb25-6"><a href="of.html#cb25-6" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb25-7"><a href="of.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   d     e     f</span></span>
<span id="cb25-8"><a href="of.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 1   red  TRUE</span></span>
<span id="cb25-9"><a href="of.html#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 2 white  TRUE</span></span>
<span id="cb25-10"><a href="of.html#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 3  blue  TRUE</span></span>
<span id="cb25-11"><a href="of.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 4  &lt;NA&gt; FALSE</span></span></code></pre></div>
<p>The columns of a data frame can be renamed using the <code>names</code> function on the data frame and assigning a vector of names to the data frame.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="of.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># name columns of data frame</span></span>
<span id="cb26-2"><a href="of.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span>, <span class="st">&quot;Color&quot;</span>, <span class="st">&quot;Passed&quot;</span>)</span>
<span id="cb26-3"><a href="of.html#cb26-3" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb26-4"><a href="of.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   ID Color Passed</span></span>
<span id="cb26-5"><a href="of.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1   red   TRUE</span></span>
<span id="cb26-6"><a href="of.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  2 white   TRUE</span></span>
<span id="cb26-7"><a href="of.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  3  blue   TRUE</span></span>
<span id="cb26-8"><a href="of.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  4  &lt;NA&gt;  FALSE</span></span></code></pre></div>
<p>The columns of a data frame can be named when you are first creating the data frame by using <code>name =</code> for each vector of data.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="of.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data frame with better column names</span></span>
<span id="cb27-2"><a href="of.html#cb27-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> d, <span class="at">Color =</span> e, <span class="at">Passed =</span> f)</span>
<span id="cb27-3"><a href="of.html#cb27-3" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb27-4"><a href="of.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   ID Color Passed</span></span>
<span id="cb27-5"><a href="of.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1   red   TRUE</span></span>
<span id="cb27-6"><a href="of.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  2 white   TRUE</span></span>
<span id="cb27-7"><a href="of.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  3  blue   TRUE</span></span>
<span id="cb27-8"><a href="of.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  4  &lt;NA&gt;  FALSE</span></span></code></pre></div>
</div>
<div id="importing-data" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Importing Data<a href="of.html#importing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Direct creation of data frames is only appropriate for very small data sets. In practice, you are likely to have a file that contains the data you want to analyze and you want to import the data into R.</p>
<p>The <code>read.table</code> function imports data in table format from file into R as a data frame.</p>
<p>The basic usage of this function is: <code>read.table(file, header = TRUE, sep = ",")</code></p>
<ul>
<li><code>file</code> is the file path and name of the file you want to import into R.
<ul>
<li>If you don’t know the file path, setting <code>file = file.choose()</code> will bring up a dialog box asking you to locate the file you want to import.</li>
</ul></li>
<li><code>header</code> specifies whether the data file has a header (variable labels for each column of data in the first row of the data file).
<ul>
<li>If you don’t specify this option in R or use <code>header = FALSE</code>, then R will assume the file doesn’t have any headings.</li>
<li><code>header = TRUE</code> tells R to read in the data as a data frame with column names taken from the first row of the data file.</li>
</ul></li>
<li><code>sep</code> specifies the delimiter separating elements in the file.
<ul>
<li>If each column of data in the file is separated by a space, then use <code>sep = " "</code>.</li>
<li>If each column of data in the file is separated by a comma, then use <code>sep = ","</code>.</li>
<li>If each column of data in the file is separated by a tab, then use <code>sep = "\t"</code>.</li>
</ul></li>
</ul>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Consider reading in a csv (comma separated file) with a header. The file in question contains information related to COVID-19 cases and deaths as of February 4, 2021. The file is available on the internet in the author’s GitHub repository. Notice that we specify the path of the file (<code>https://raw.githubusercontent.com/jfrench/DataWrangleViz/master/data/</code>) prior to specifying the file name (<code>covid_dec4.csv</code>). Since the file has a header, we specify <code>header = TRUE</code>. Since the data values are separated by commas, we specify <code>sep = ","</code>. Run the code below in your R Console.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="of.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import data as data frame</span></span>
<span id="cb28-2"><a href="of.html#cb28-2" aria-hidden="true" tabindex="-1"></a>dtf <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;https://raw.githubusercontent.com/jfrench/DataWrangleViz/master/data/covid_dec4.csv&quot;</span>,</span>
<span id="cb28-3"><a href="of.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-4"><a href="of.html#cb28-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb28-5"><a href="of.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dtf)</span>
<span id="cb28-6"><a href="of.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    50 obs. of  7 variables:</span></span>
<span id="cb28-7"><a href="of.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ state_name: chr  &quot;Alabama&quot; &quot;Alaska&quot; &quot;Arizona&quot; &quot;Arkansas&quot; ...</span></span>
<span id="cb28-8"><a href="of.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ state_abb : chr  &quot;AL&quot; &quot;AK&quot; &quot;AZ&quot; &quot;AR&quot; ...</span></span>
<span id="cb28-9"><a href="of.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ deaths    : int  3831 142 6885 2586 19582 2724 5146 782 19236 9725 ...</span></span>
<span id="cb28-10"><a href="of.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ population: num  387000 96500 498000 238000 2815000 ...</span></span>
<span id="cb28-11"><a href="of.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ income    : int  25734 35455 29348 25359 31086 35053 37299 32928 27107 28838 ...</span></span>
<span id="cb28-12"><a href="of.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ hs        : num  82.1 91 85.6 82.9 80.7 89.7 88.6 87.7 85.5 84.3 ...</span></span>
<span id="cb28-13"><a href="of.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ bs        : num  21.9 27.9 25.9 19.5 30.1 36.4 35.5 27.8 25.8 27.3 ...</span></span></code></pre></div>
<p>Running <code>str</code> on the data frame gives us a general picture of the values stored in the data frame.</p>
</div>
<p>Note that the <code>read_table</code> function in the <strong>readr</strong> package <span class="citation">(<a href="#ref-R-readr" role="doc-biblioref">Wickham, Hester, and Bryan 2022</a>)</span> is perhaps a better way of reading in tabular data and uses similar syntax. To import data contained in Microsoft Excel files, you can use functions available in the <strong>readxl</strong> package <span class="citation">(<a href="#ref-R-readxl" role="doc-biblioref">Wickham and Bryan 2022</a>)</span>.</p>
</div>
<div id="extracting-parts-of-a-data-frame" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Extracting parts of a data frame<a href="of.html#extracting-parts-of-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R provides many ways to extract parts of a data frame. We will provide several examples using the <code>mtcars</code> data frame in the <strong>datasets</strong> package.</p>
<p>The <code>mtcars</code> data frame 32 observations of 11 variables. The variables are:</p>
<ul>
<li><code>mpg</code>: miles per gallon.</li>
<li><code>cyl</code>: number of cylinders.</li>
<li><code>disp</code>: engine displacement (cubic inches).</li>
<li><code>hp</code>: horsepower.</li>
<li><code>drat</code>: rear axle ratio.</li>
<li><code>wt</code>: weight in 1000s of pounds.</li>
<li><code>qsec</code>: time in seconds to travel 0.25 of a mile.</li>
<li><code>vs</code>: engine shape (0 = V-shaped, 1 = straight).</li>
<li><code>am</code>: transmission type (0 = automatic, 1 = manual).</li>
<li><code>gear</code>: number of forward gears.</li>
<li><code>carb</code>: number of carburetors.</li>
</ul>
<p>We load the data set and examine the basic structure by running the commands below.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="of.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars) <span class="co"># load data set</span></span>
<span id="cb29-2"><a href="of.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)  <span class="co"># examine data structure</span></span>
<span id="cb29-3"><a href="of.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    32 obs. of  11 variables:</span></span>
<span id="cb29-4"><a href="of.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...</span></span>
<span id="cb29-5"><a href="of.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...</span></span>
<span id="cb29-6"><a href="of.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ disp: num  160 160 108 258 360 ...</span></span>
<span id="cb29-7"><a href="of.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...</span></span>
<span id="cb29-8"><a href="of.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...</span></span>
<span id="cb29-9"><a href="of.html#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...</span></span>
<span id="cb29-10"><a href="of.html#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ qsec: num  16.5 17 18.6 19.4 17 ...</span></span>
<span id="cb29-11"><a href="of.html#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...</span></span>
<span id="cb29-12"><a href="of.html#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...</span></span>
<span id="cb29-13"><a href="of.html#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...</span></span>
<span id="cb29-14"><a href="of.html#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</span></span></code></pre></div>
<p>We should do some data cleaning on this data set (see Chapter <a href="data-cleaning-and-exploration.html#data-cleaning-and-exploration">3</a>), but we will refrain from this for simplicity.</p>
<div id="direct-extraction" class="section level4 hasAnchor" number="2.3.3.1">
<h4><span class="header-section-number">2.3.3.1</span> Direct extraction<a href="of.html#direct-extraction" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The column variables of a data frame may be extracted from a data frame by specifying the data frame’s name, then <code>$</code>, and then specifying the name of the desired variable. This pulls the actual variable vector out of the data frame, so the thing extracted is a vector, not a data frame.</p>
<p>Below, we extract the <code>mpg</code> variable from the <code>mtcars</code> data frame.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="of.html#cb30-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>mpg</span>
<span id="cb30-2"><a href="of.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4</span></span>
<span id="cb30-3"><a href="of.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7</span></span>
<span id="cb30-4"><a href="of.html#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] 15.0 21.4</span></span></code></pre></div>
<p>Another way to extract a variable from a data frame as a vector is <code>df[, "var"]</code>, where <code>df</code> is the name of our data frame and <code>var</code> is the desired variable name. This syntax uses a <code>df[rows, columns]</code> style syntax, where <code>rows</code> and <code>columns</code> indicate the desired rows or columns. If either the <code>rows</code> or <code>columns</code> are left blank, then all <code>rows</code> or <code>columns</code>, respectively, are extracted.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="of.html#cb31-1" aria-hidden="true" tabindex="-1"></a>mtcars[,<span class="st">&quot;mpg&quot;</span>]</span>
<span id="cb31-2"><a href="of.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4</span></span>
<span id="cb31-3"><a href="of.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7</span></span>
<span id="cb31-4"><a href="of.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] 15.0 21.4</span></span></code></pre></div>
<p>Once again, this action returns a vector, not a data frame. The is because the <code>[</code> operator has an argument <code>drop</code> that is set to <code>TRUE</code> by default by when using <code>[rows, columns]</code> style extraction. The <code>drop</code> argument controls whether the result is coerced to the lowest possible dimension.</p>
<p>To get around this behavior we can change the <code>drop</code> argument to <code>FALSE</code>, as shown below (some output suppressed).</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="of.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract mpg variable, keep as data frame</span></span>
<span id="cb32-2"><a href="of.html#cb32-2" aria-hidden="true" tabindex="-1"></a>mtcars[,<span class="st">&quot;mpg&quot;</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb32-3"><a href="of.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg</span></span>
<span id="cb32-4"><a href="of.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4           21.0</span></span>
<span id="cb32-5"><a href="of.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4 Wag       21.0</span></span>
<span id="cb32-6"><a href="of.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Datsun 710          22.8</span></span>
<span id="cb32-7"><a href="of.html#cb32-7" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>An easier approach to avoid the default <code>drop</code> behavior is the slightly different syntax <code>df["var"]</code> (notice we no longer have the comma to separate rows and columns). We use this syntax below, suppressing part of the output, for the <code>mpg</code> variable in <code>mtcars</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="of.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract mpg variable, keep as data frame</span></span>
<span id="cb33-2"><a href="of.html#cb33-2" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&quot;mpg&quot;</span>]</span>
<span id="cb33-3"><a href="of.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg</span></span>
<span id="cb33-4"><a href="of.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4           21.0</span></span>
<span id="cb33-5"><a href="of.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4 Wag       21.0</span></span>
<span id="cb33-6"><a href="of.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Datsun 710          22.8</span></span>
<span id="cb33-7"><a href="of.html#cb33-7" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>To select multiple variables in a data frame, we can provide a character vector with multiple variable names between <code>[]</code>. In the example below, we extract both the <code>mpg</code> and <code>cyl</code> variables from <code>mtcars</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="of.html#cb34-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;cyl&quot;</span>)]</span>
<span id="cb34-2"><a href="of.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg cyl</span></span>
<span id="cb34-3"><a href="of.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4           21.0   6</span></span>
<span id="cb34-4"><a href="of.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4 Wag       21.0   6</span></span>
<span id="cb34-5"><a href="of.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Datsun 710          22.8   4</span></span>
<span id="cb34-6"><a href="of.html#cb34-6" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can also use numeric indices to directly indicate the rows or columns of the data frame that you would like to extract. Alternatively, you can use variable names for the columns.</p>
<ul>
<li><code>df[1,]</code> would access the first row of <code>df</code>.</li>
<li><code>df[1:2,]</code> would access the first two rows of <code>df</code>.</li>
<li><code>df[,2]</code> would access the second column of <code>df</code>.</li>
<li><code>df[1:2, 2:3]</code> would access the information in rows 1 and 2 of columns 2 and 3 of <code>df</code>.</li>
<li><code>df[c(1, 3, 5), c("var1", "var2")]</code> would access the information in rows 1, 3, and 5 of the <code>var1</code> and <code>var2</code> variables.</li>
</ul>
<p>We practice these techniques below.</p>
<div class="yourturn">
<p>Run the following commands in the Console. Determine what task each command is performing.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="of.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract parts of a data frame</span></span>
<span id="cb35-2"><a href="of.html#cb35-2" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">numbers =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb35-3"><a href="of.html#cb35-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">characters =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb35-4"><a href="of.html#cb35-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">logicals =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb35-5"><a href="of.html#cb35-5" aria-hidden="true" tabindex="-1"></a>df3 <span class="co"># print df3</span></span>
<span id="cb35-6"><a href="of.html#cb35-6" aria-hidden="true" tabindex="-1"></a>df3<span class="sc">$</span>logicals <span class="co"># extract the logicals vector of df3</span></span>
<span id="cb35-7"><a href="of.html#cb35-7" aria-hidden="true" tabindex="-1"></a>df3[<span class="dv">1</span>, ] <span class="co"># extract the first column of df3</span></span>
<span id="cb35-8"><a href="of.html#cb35-8" aria-hidden="true" tabindex="-1"></a>df3[, <span class="dv">3</span>] <span class="co"># extract the third column of df3</span></span>
<span id="cb35-9"><a href="of.html#cb35-9" aria-hidden="true" tabindex="-1"></a>df3[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>] <span class="co"># extract column 2 and 3 of df3</span></span>
<span id="cb35-10"><a href="of.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the numbers and logical columns of df3</span></span>
<span id="cb35-11"><a href="of.html#cb35-11" aria-hidden="true" tabindex="-1"></a>df3[, <span class="fu">c</span>(<span class="st">&quot;numbers&quot;</span>, <span class="st">&quot;logicals&quot;</span>)] </span>
<span id="cb35-12"><a href="of.html#cb35-12" aria-hidden="true" tabindex="-1"></a>df3[<span class="fu">c</span>(<span class="st">&quot;numbers&quot;</span>, <span class="st">&quot;logicals&quot;</span>)]</span></code></pre></div>
</div>
</div>
<div id="extraction-using-logical-expressions" class="section level4 hasAnchor" number="2.3.3.2">
<h4><span class="header-section-number">2.3.3.2</span> Extraction using logical expressions<a href="of.html#extraction-using-logical-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Logical expressions can be used to subset a data frame.</p>
<p>To select specific rows of a data frame, we use the syntax <code>df[logical vector, ]</code>, where <code>logical vector</code> is a valid logical vector whose length matches the number of rows in the data frame. Usually, the logical vector is created using a logical expression involving one or more data frame variables. In the code below, we extract the rows of the <code>mtcars</code> data frame for which the <code>hp</code> variable is more than 250.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="of.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract rows with hp &gt; 250</span></span>
<span id="cb36-2"><a href="of.html#cb36-2" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>hp <span class="sc">&gt;</span> <span class="dv">250</span>,]</span>
<span id="cb36-3"><a href="of.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                 mpg cyl disp  hp drat   wt qsec vs am gear carb</span></span>
<span id="cb36-4"><a href="of.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Ford Pantera L 15.8   8  351 264 4.22 3.17 14.5  0  1    5    4</span></span>
<span id="cb36-5"><a href="of.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Maserati Bora  15.0   8  301 335 3.54 3.57 14.6  0  1    5    8</span></span></code></pre></div>
<p>We can make the logical expression more complicated and also select specific variables using the syntax discussed in Section <a href="of.html#direct-extraction">2.3.3.1</a>. Below, we extract the rows of <code>mtcars</code> with 8 cylinders and <code>mpg &gt; 17</code>, while extracting only the <code>mpg</code>, <code>cyl</code>, <code>disp</code>, and <code>hp</code> variables.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="of.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return rows with `cyl == 8` and `mpg &gt; 17`</span></span>
<span id="cb37-2"><a href="of.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># return columns mpg, cyl, disp, hp</span></span>
<span id="cb37-3"><a href="of.html#cb37-3" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">8</span> <span class="sc">&amp;</span> mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">17</span>,</span>
<span id="cb37-4"><a href="of.html#cb37-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;cyl&quot;</span>, <span class="st">&quot;disp&quot;</span>, <span class="st">&quot;hp&quot;</span>)]</span>
<span id="cb37-5"><a href="of.html#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="do">##                    mpg cyl  disp  hp</span></span>
<span id="cb37-6"><a href="of.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Hornet Sportabout 18.7   8 360.0 175</span></span>
<span id="cb37-7"><a href="of.html#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Merc 450SL        17.3   8 275.8 180</span></span>
<span id="cb37-8"><a href="of.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Pontiac Firebird  19.2   8 400.0 175</span></span></code></pre></div>
</div>
<div id="extraction-using-the-subset-function" class="section level4 hasAnchor" number="2.3.3.3">
<h4><span class="header-section-number">2.3.3.3</span> Extraction using the <code>subset</code> function<a href="of.html#extraction-using-the-subset-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The techniques for extracting parts of a data frame discussed in Sections <a href="of.html#direct-extraction">2.3.3.1</a> and <a href="of.html#extraction-using-logical-expressions">2.3.3.2</a> are the fundamental approaches for selecting desired parts of a data frame. However, these techniques can seem complex and difficult to interpret, particularly when looking back at code you have written in the past. A sleeker approach to extracting part of a data frame is to use the <code>subset</code> function.</p>
<p>The <code>subset</code> function returns the part of a data frame that meets the specified conditions. The basic usage of this function is: <code>subset(x, subset, select, drop = FALSE)</code></p>
<ul>
<li><code>x</code> is the object you want to subset.
<ul>
<li><code>x</code> can be a vector, matrix, or data frame.</li>
</ul></li>
<li><code>subset</code> is a logical expression that indicates the elements or rows of <code>x</code> to keep (<code>TRUE</code> means keep).</li>
<li><code>select</code> is a vector that indicates the columns to keep.</li>
<li><code>drop</code> is a logical value indicating whether the data frame should “drop” into a vector if only a single row or column is kept. The default is <code>FALSE</code>, meaning that a data frame will always be returned by the <code>subset</code> function by default.</li>
</ul>
<p>There are many clever ways of using <code>subset</code> to select specific parts of a data frame. We encourage the reader to run <code>?base::subset</code> in the Console for more details.</p>
<div class="yourturn">
<p><strong>Your turn</strong></p>
<p>Run the following commands in the Console to use the <code>subset</code> function to extract parts of the <code>mtcars</code> data framea.</p>
<ul>
<li><code>subset(mtcars, subset = gear &gt; 4)</code>. This command will subset the rows of <code>mtcars</code> that have more than 4 gears. Note any variables referred to in the <code>subset</code> function are assumed to be part of the supplied data frame or are available in memory.</li>
<li><code>subset(mtcars, select = c(disp, hp, gear))</code>. This command will select the <code>disp</code>, <code>hp</code>, and <code>gear</code> variables of <code>mtcars</code> but will exclude the other columns.</li>
<li><code>subset(mtcars, subset = gear &gt; 4, select = c(disp, hp, gear))</code> combines the previous two subsets into a single command.</li>
</ul>
</div>
<p>An advantage of the <code>subset</code> function is that it makes code easily readable. This is important for collaborating with others, including your future self! Using base R, the final code example above would be: <code>mtcars[mtcars$gear&gt;4, c("disp", "hp", "gear")]</code></p>
<p>It is difficult to look at base R code and immediately tell what it happening, so the <code>subset</code> function adds clarity.</p>
</div>
</div>
</div>
<div id="using-the-pipe-operator" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Using the pipe operator<a href="of.html#using-the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R’s native pipe operator (<code>|&gt;</code>) allows you to “pipe” the object on the left side of the operator into the first argument of the function on the right side of the operator. There are ways to modify this default behavior, but we will not discuss them.</p>
<p>The pipe operator is a convenient way to string together numerous steps in a string of commands. This coding style is generally considered more readable than other approaches because you can incrementally modify the object through each pipe and each step of the pipe is easy to understand. Ultimately, it’s a stylistic choice that can decide to adopt or ignore.</p>
<p>Consider the following approaches to extracting part of <code>mtcars</code>. We choose the rows for which engine displacement is more than 400 and only keep the <code>mpg</code>, <code>disp</code>, and <code>hp</code> columns. We can do this in a single function call, but the piping approach breaks the action into smaller parts.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="of.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># two styles for select certain rows and columns of mtcars </span></span>
<span id="cb38-2"><a href="of.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mtcars,</span>
<span id="cb38-3"><a href="of.html#cb38-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">subset =</span> disp <span class="sc">&gt;</span> <span class="dv">400</span>,</span>
<span id="cb38-4"><a href="of.html#cb38-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">select =</span> <span class="fu">c</span>(mpg, disp, hp))</span>
<span id="cb38-5"><a href="of.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg disp  hp</span></span>
<span id="cb38-6"><a href="of.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Cadillac Fleetwood  10.4  472 205</span></span>
<span id="cb38-7"><a href="of.html#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Lincoln Continental 10.4  460 215</span></span>
<span id="cb38-8"><a href="of.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Chrysler Imperial   14.7  440 230</span></span>
<span id="cb38-9"><a href="of.html#cb38-9" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb38-10"><a href="of.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">subset =</span> disp <span class="sc">&gt;</span> <span class="dv">400</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-11"><a href="of.html#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(mpg, disp, hp))</span>
<span id="cb38-12"><a href="of.html#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg disp  hp</span></span>
<span id="cb38-13"><a href="of.html#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Cadillac Fleetwood  10.4  472 205</span></span>
<span id="cb38-14"><a href="of.html#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Lincoln Continental 10.4  460 215</span></span>
<span id="cb38-15"><a href="of.html#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Chrysler Imperial   14.7  440 230</span></span></code></pre></div>
<p>When reading code with pipes, the pipe can be thought of as the word “then”. In the code above, we take <code>mtcars</code> <em>then</em> subset it based on <code>disp</code> and <em>then</em> select some columns.</p>
<p>Most parts of the world do not use miles per gallon to measure fuel economy because they don’t measure distance in miles nor volume in gallons. A common measure of fuel economy is the liters of fuel required to travel 100 kilometers. Noting that 3.8 liters is (approximately) equivalent to 1 (U.S.) gallon and 1.6 kilometers is (approxiomately) equivalent to 1 mile, we can convert fuel economy of <span class="math inline">\(x\)</span> miles per gallon to liters per 100 kilometers by noting:</p>
<p><span class="math display">\[\frac{1}{x}\frac{\mathrm{gal}}{\mathrm{mi}}\times\frac{3.8}{1}\frac{\mathrm{L}}{\mathrm{gal}}\times\frac{1}{1.6}\frac{\mathrm{mi}}{\mathrm{km}}\times\frac{100\;\mathrm{km}}{100\;\mathrm{km}} = \frac{237.5}{x}\frac{\mathrm{L}}{100\;\mathrm{km}}.\]</span></p>
<p>Thus, to convert from miles per gallon to liters per 100 kilometers, we take 237.5 and divide by the number of miles per gallon.</p>
<p>In the next set of code, we create a new variable, <code>lp100km</code>, in the <code>mtcars</code> data frame that describes the liters of fuel each car requires to travel 100 kilometers. Then we select only the columns <code>mpg</code> and <code>lp100km</code>. We then look at only the first 5 observations. To create the new variable, <code>lp100km</code>, we use the <code>base::transform</code> function, which allows you to create a new variable from the existing columns of a data frame. Run <code>?base::transform</code> in the Console for more details and examples.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="of.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new variable</span></span>
<span id="cb39-2"><a href="of.html#cb39-2" aria-hidden="true" tabindex="-1"></a>mtcars2 <span class="ot">&lt;-</span> <span class="fu">transform</span>(mtcars, <span class="at">lp100km =</span> <span class="fl">237.5</span><span class="sc">/</span>mpg)</span>
<span id="cb39-3"><a href="of.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select certain columns</span></span>
<span id="cb39-4"><a href="of.html#cb39-4" aria-hidden="true" tabindex="-1"></a>mtcars3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(mtcars2, <span class="at">select =</span> <span class="fu">c</span>(mpg, lp100km))</span>
<span id="cb39-5"><a href="of.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print first 5 rows</span></span>
<span id="cb39-6"><a href="of.html#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars3, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb39-7"><a href="of.html#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="do">##                    mpg  lp100km</span></span>
<span id="cb39-8"><a href="of.html#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4         21.0 11.30952</span></span>
<span id="cb39-9"><a href="of.html#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4 Wag     21.0 11.30952</span></span>
<span id="cb39-10"><a href="of.html#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Datsun 710        22.8 10.41667</span></span>
<span id="cb39-11"><a href="of.html#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Hornet 4 Drive    21.4 11.09813</span></span>
<span id="cb39-12"><a href="of.html#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Hornet Sportabout 18.7 12.70053</span></span></code></pre></div>
<p>Next, we perform the actions above with pipes.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="of.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new variable, select columns, extract first 5 rows</span></span>
<span id="cb40-2"><a href="of.html#cb40-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="of.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>(<span class="at">lp100km =</span> <span class="fl">237.5</span><span class="sc">/</span>mpg) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="of.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(mpg, lp100km)) <span class="sc">|&gt;</span></span>
<span id="cb40-5"><a href="of.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb40-6"><a href="of.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                    mpg  lp100km</span></span>
<span id="cb40-7"><a href="of.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4         21.0 11.30952</span></span>
<span id="cb40-8"><a href="of.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Mazda RX4 Wag     21.0 11.30952</span></span>
<span id="cb40-9"><a href="of.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Datsun 710        22.8 10.41667</span></span>
<span id="cb40-10"><a href="of.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Hornet 4 Drive    21.4 11.09813</span></span>
<span id="cb40-11"><a href="of.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Hornet Sportabout 18.7 12.70053</span></span></code></pre></div>
<p>If we allow ourselves to use parts of the <strong>tidyverse</strong>, we can simplify the code even further, as shown below.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="of.html#cb41-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="of.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>(<span class="at">lp100km =</span> <span class="fl">237.5</span><span class="sc">/</span>mpg) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="of.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(mpg, lp100km)) <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="of.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(lp100km)) <span class="sc">|&gt;</span></span>
<span id="cb41-5"><a href="of.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb41-6"><a href="of.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                      mpg  lp100km</span></span>
<span id="cb41-7"><a href="of.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Cadillac Fleetwood  10.4 22.83654</span></span>
<span id="cb41-8"><a href="of.html#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Lincoln Continental 10.4 22.83654</span></span>
<span id="cb41-9"><a href="of.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Camaro Z28          13.3 17.85714</span></span>
<span id="cb41-10"><a href="of.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Duster 360          14.3 16.60839</span></span>
<span id="cb41-11"><a href="of.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Chrysler Imperial   14.7 16.15646</span></span></code></pre></div>
<p>The function <code>dplyr::arrange</code> orders the rows of a data frame based on a column variable, while the <code>dplyr::desc</code> causes this to be done in descending order.</p>
</div>
<div id="dealing-with-common-problems" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Dealing with common problems<a href="of.html#dealing-with-common-problems" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You are going to have to deal with many errors and problems as you use R because of inexperience, simple mistakes, misunderstanding. It happens even to the best programmers.</p>
<p>Every problem is unique, but there are common mistakes that we try to provide insight for below.</p>
<p><strong><code>Error in ...: could not find function "..."</code></strong>. You probably forgot to load the package needed to use the function. You also may have misspelled the function name.</p>
<p><strong><code>Error: object '...' not found</code></strong>. The object doesn’t exist in loaded memory. Perhaps you forget to assign that name to an object or misspelled the name of the object you are trying to access.</p>
<p><strong><code>Error in plot.new() : figure margins too large</code></strong>. This typically happens because your Plots pane is too small. Increase its size and try again.</p>
<p><strong>Code was working, but isn’t anymore</strong>. You may have run code out of order. It may work if you run it in order. Or you may have run something in the Console that you don’t have in your Script file. It is good practice to clear your environment (the objects R has loaded in memory) using the broom icon <img src="pictures/broom_button.png" width="37" /> in the Environment pane and rerun your entire Script file to ensure it behaves as expected.</p>
</div>
<div id="ecosystem-debate" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Ecosystem debate<a href="of.html#ecosystem-debate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We typically prefer performing analysis using the functionality of <strong>base</strong> R, which means we try to perform our analysis with features R offers by default. This will be impossible as we move to more complicated aspects of regression analysis, so we will introduce new packages and functions as we progress.</p>
<p>Many readers may have previous experience working with the <strong>tidyverse</strong> (<a href="https://www.tidyverse.org">https://www.tidyverse.org</a>) and wonder how frequently we use <strong>tidyverse</strong> functionality. The <strong>tidyverse</strong> offers a unified framework for data manipulation and visualization that tends to be more consistent than <strong>base</strong> R. However, there are many situations where a <strong>base</strong> R solution is more straightforward than a <strong>tidyverse</strong> solution, not to mention the fact that there are many aspects of R programming (e.g., S3 and S4 objects, method dispatch) that require knowledge of <strong>base</strong> R features. Because the R universe is vast and there are many competing coding styles, we will prioritize analysis approaches using <strong>base</strong> R, which gives users a stronger programming foundation. However, we use analysis approaches from the <strong>tidyverse</strong> when it greatly simplifies analysis, data manipulation, or visualization because it provides an extremely useful feature set.</p>
</div>
<div id="additional-information" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Additional information<a href="of.html#additional-information" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="comparing-assignment-operators" class="section level3 hasAnchor" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Comparing assignment operators<a href="of.html#comparing-assignment-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As previously mentioned in Section <a href="r-foundations.html#assignment">1.3</a>, both <code>&lt;-</code> and <code>=</code> can mostly be used interchangeably for assignment. But there are times when using <code>=</code> for assignment can be problematic. Consider the examples below where we want to use <code>system.time</code> to time how long it takes to draw 100 values from a standard normal distribution and assign it the name <code>result</code>.</p>
<p>This code works:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="of.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(result <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb42-2"><a href="of.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="do">##    user  system elapsed </span></span>
<span id="cb42-3"><a href="of.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="do">##       0       0       0</span></span></code></pre></div>
<p>This code doesn’t work:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="of.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="at">result =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb43-2"><a href="of.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Error in system.time(result = rnorm(100)): unused argument (result = rnorm(100))</span></span></code></pre></div>
<p>What’s the difference? In the second case, R thinks you are setting the <code>result</code> argument of the <code>system.time</code> function (which doesn’t exist) to the value produced by <code>rnorm(100)</code>.</p>
<p>Thus, it is best to use <code>&lt;-</code> for assigning a name to an object and reserving <code>=</code> for specifying function arguments.</p>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-readxl" class="csl-entry">
Wickham, Hadley, and Jennifer Bryan. 2022. <em>Readxl: Read Excel Files</em>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
<div id="ref-R-readr" class="csl-entry">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2022. <em>Readr: Read Rectangular Text Data</em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-foundations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-cleaning-and-exploration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["A-Progessive-Introduction-to-Linear-Models.pdf", "A-Progessive-Introduction-to-Linear-Models.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
